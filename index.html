// Listen for form submission to send a file
document.getElementById('file-form').addEventListener('submit', event => {
    event.preventDefault();
    
    const fileInput = document.getElementById('file-input');
    const file = fileInput.files[0];

    if (!file) return;

    // Display the filename in the peer list
    const listItem = document.createElement('li');
    listItem.textContent = `Sending file "${file.name}"`;
    peerList.appendChild(listItem);

    // Read file data as a binary blob
    const reader = new FileReader();
    reader.onload = event => {
        // Log the file data before sending
        console.log("File Data:", event.target.result);
        
        // Send file to all connected peers
        const fileData = event.target.result;
        sendChannel.send(fileData);
    };
    reader.readAsArrayBuffer(file);
});
